<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>è½»é‡åƒç´ ç½®æ¢åŠ å¯† Demoï¼ˆä¿®å¤å¯é€†ï¼‰</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #050816;
      --panel: #0f172a;
      --panel-light: #111827;
      --accent: #6366f1;
      --accent-soft: rgba(99,102,241,0.15);
      --accent-strong: rgba(129,140,248,0.5);
      --border-subtle: rgba(148,163,184,0.25);
      --text-main: #e5e7eb;
      --text-subtle: #9ca3af;
      --danger: #f97373;
      --success: #4ade80;
      --warning: #fbbf24;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      background: radial-gradient(
          circle at top left,
          rgba(56,189,248,0.08),
          transparent 55%
        ),
        radial-gradient(
          circle at top right,
          rgba(129,140,248,0.10),
          transparent 55%
        ),
        radial-gradient(
          circle at bottom,
          rgba(248,113,113,0.06),
          transparent 55%
        ),
        var(--bg);
      color: var(--text-main);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .page {
      max-width: 1200px;
      margin: 0 auto;
      padding: 24px 16px 32px;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    header {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .title-row {
      display: flex;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }

    .title-main {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #e5e7eb, #4b5563);
      position: relative;
      box-shadow: 0 0 0 1px rgba(148,163,184,0.2),
        0 0 18px rgba(129,140,248,0.5);
    }

    .logo::before,
    .logo::after {
      content: "";
      position: absolute;
      inset: 4px;
      border-radius: 50%;
      border: 1px solid rgba(15,23,42,0.9);
      pointer-events: none;
    }

    .logo::after {
      inset: 9px;
      border-color: rgba(15,23,42,0.8);
    }

    h1 {
      font-size: 20px;
      font-weight: 650;
      letter-spacing: 0.03em;
      margin: 0;
    }

    .badge {
      font-size: 11px;
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.5);
      color: #e5e7eb;
      background: linear-gradient(
        to right,
        rgba(15,23,42,0.9),
        rgba(30,64,175,0.85)
      );
      box-shadow: 0 0 0 1px rgba(15,23,42,0.5);
    }

    .subtitle {
      font-size: 13px;
      color: var(--text-subtle);
      max-width: 720px;
    }

    .subtitle strong {
      color: #e5e7eb;
    }

    main {
      display: grid;
      grid-template-columns: minmax(0, 340px) minmax(0, 1.1fr);
      gap: 18px;
      align-items: flex-start;
    }

    @media (max-width: 880px) {
      main {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .panel {
      border-radius: 18px;
      background: radial-gradient(
          circle at top left,
          rgba(30,64,175,0.35),
          transparent 55%
        ),
        radial-gradient(
          circle at bottom right,
          rgba(15,23,42,0.9),
          rgba(15,23,42,1)
        );
      border: 1px solid rgba(148,163,184,0.35);
      box-shadow:
        0 24px 60px rgba(15,23,42,0.85),
        0 0 0 1px rgba(15,23,42,0.75);
      padding: 14px 14px 12px;
      position: relative;
      overflow: hidden;
    }

    .panel::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(
        circle at top right,
        rgba(129,140,248,0.11),
        transparent 50%
      );
      mix-blend-mode: soft-light;
      opacity: 0.9;
      pointer-events: none;
    }

    .panel-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
      margin-bottom: 10px;
    }

    .panel-title {
      font-size: 13px;
      font-weight: 550;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #cbd5f5;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .panel-title-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #a5b4fc, #4f46e5);
      box-shadow:
        0 0 0 1px rgba(191,219,254,0.6),
        0 0 0 5px rgba(129,140,248,0.3);
    }

    .panel-tagline {
      font-size: 11px;
      color: var(--text-subtle);
      opacity: 0.95;
    }

    .panel-body {
      display: flex;
      flex-direction: column;
      gap: 12px;
      position: relative;
      z-index: 1;
    }

    .section-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: #9ca3af;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .section-label::before {
      content: "";
      width: 16px;
      height: 1px;
      border-radius: 99px;
      background: linear-gradient(
        to right,
        rgba(148,163,184,0.4),
        rgba(99,102,241,0.8)
      );
    }

    .section {
      padding: 10px 10px 9px;
      border-radius: 14px;
      background: radial-gradient(
          circle at top left,
          rgba(15,23,42,0.95),
          rgba(15,23,42,0.9)
        ),
        rgba(15,23,42,0.92);
      box-shadow:
        0 0 0 1px rgba(15,23,42,0.95),
        0 16px 40px rgba(15,23,42,0.9);
      border: 1px solid rgba(148,163,184,0.35);
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 6px;
    }

    .section-title {
      font-size: 13px;
      font-weight: 550;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .section-pill {
      font-size: 10px;
      padding: 1px 6px;
      border-radius: 999px;
      background: rgba(15,118,110,0.3);
      border: 1px solid rgba(34,197,94,0.7);
      color: #bbf7d0;
    }

    .section-desc {
      font-size: 11px;
      color: var(--text-subtle);
    }

    .dropzone {
      border-radius: 12px;
      border: 1px dashed rgba(148,163,184,0.6);
      background: radial-gradient(
          circle at top left,
          rgba(37,99,235,0.35),
          transparent 60%
        ),
        rgba(15,23,42,0.85);
      padding: 12px 10px;
      text-align: center;
      display: flex;
      flex-direction: column;
      gap: 7px;
      cursor: pointer;
      transition: border-color 0.15s ease, background 0.15s ease,
        box-shadow 0.15s ease, transform 0.1s ease;
      box-shadow: 0 12px 30px rgba(15,23,42,0.9);
      position: relative;
      overflow: hidden;
    }

    .dropzone::before {
      content: "";
      position: absolute;
      inset: -40%;
      background: conic-gradient(
        from 0deg,
        transparent 0,
        rgba(129,140,248,0.25),
        transparent 60%,
        transparent 100%
      );
      opacity: 0;
      transition: opacity 0.2s ease;
      pointer-events: none;
    }

    .dropzone.dragover {
      border-color: #4f46e5;
      background: radial-gradient(
          circle at top left,
          rgba(59,130,246,0.4),
          transparent 60%
        ),
        rgba(15,23,42,0.98);
      box-shadow:
        0 0 0 1px rgba(129,140,248,0.7),
        0 18px 42px rgba(15,23,42,0.95);
      transform: translateY(-1px);
    }

    .dropzone.dragover::before {
      opacity: 1;
    }

    .dropzone-title {
      font-size: 12px;
      font-weight: 550;
    }

    .dropzone-hint {
      font-size: 11px;
      color: var(--text-subtle);
    }

    .pill-row {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 5px;
      font-size: 11px;
      color: var(--text-subtle);
    }

    .pill {
      padding: 2px 6px;
      border-radius: 999px;
      background: rgba(15,23,42,0.9);
      border: 1px solid rgba(148,163,184,0.4);
    }

    .hint-row {
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 11px;
      color: var(--text-subtle);
      justify-content: center;
    }

    .hint-row strong {
      color: #e5e7eb;
    }

    .hint-icon {
      width: 14px;
      height: 14px;
      border-radius: 999px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: rgba(15,23,42,0.95);
      box-shadow: 0 0 0 1px rgba(148,163,184,0.5);
      font-size: 11px;
    }

    .fields {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .field-group {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .field-label-row {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 8px;
      font-size: 11px;
    }

    .field-label-main {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .field-label-main span {
      font-weight: 500;
    }

    .label-tag {
      font-size: 10px;
      padding: 1px 5px;
      border-radius: 999px;
      background: rgba(30,64,175,0.4);
      border: 1px solid rgba(129,140,248,0.7);
      color: #c7d2fe;
    }

    .field-label-secondary {
      font-size: 10px;
      color: var(--text-subtle);
    }

    .input-shell {
      border-radius: 999px;
      padding: 1px;
      background: radial-gradient(
        circle at top left,
        rgba(129,140,248,0.8),
        rgba(30,64,175,0.6),
        rgba(15,23,42,1)
      );
      box-shadow:
        0 0 0 1px rgba(15,23,42,0.95),
        0 12px 25px rgba(15,23,42,0.95);
    }

    .input-inner {
      border-radius: inherit;
      padding: 5px 8px;
      background: radial-gradient(
          circle at top left,
          rgba(30,64,175,0.9),
          rgba(15,23,42,1) 65%
        ),
        rgba(15,23,42,0.97);
      display: flex;
      align-items: center;
      gap: 6px;
      position: relative;
      overflow: hidden;
    }

    input[type="text"] {
      flex: 1;
      border: none;
      outline: none;
      background: transparent;
      color: var(--text-main);
      font-size: 12px;
      padding: 2px 0;
    }

    input::placeholder {
      color: rgba(148,163,184,0.6);
    }

    .input-icon {
      font-size: 13px;
      color: rgba(191,219,254,0.9);
    }

    .input-meta {
      font-size: 10px;
      color: rgba(156,163,175,0.95);
    }

    .slider-row {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .slider-shell {
      flex: 1;
      border-radius: 999px;
      padding: 1px;
      background: radial-gradient(
        circle at top left,
        rgba(59,130,246,0.85),
        rgba(30,64,175,0.7),
        rgba(15,23,42,1)
      );
      box-shadow:
        0 0 0 1px rgba(15,23,42,0.95),
        0 12px 25px rgba(15,23,42,0.95);
    }

    .slider-inner {
      border-radius: inherit;
      padding: 3px 8px 5px;
      background: radial-gradient(
          circle at top left,
          rgba(15,23,42,1),
          rgba(15,23,42,1)
        ),
        rgba(15,23,42,0.96);
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    input[type="range"] {
      -webkit-appearance: none;
      width: 100%;
      height: 4px;
      border-radius: 999px;
      background: linear-gradient(
        to right,
        rgba(129,140,248,0.85),
        rgba(59,130,246,0.9),
        rgba(56,189,248,0.9)
      );
      outline: none;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #e5e7eb, #4f46e5);
      box-shadow:
        0 0 0 1px rgba(15,23,42,0.95),
        0 0 0 3px rgba(191,219,254,0.7),
        0 8px 20px rgba(30,64,175,0.9);
      cursor: pointer;
      border: none;
    }

    input[type="range"]::-moz-range-track {
      height: 4px;
      border-radius: 999px;
      background: linear-gradient(
        to right,
        rgba(129,140,248,0.85),
        rgba(59,130,246,0.9),
        rgba(56,189,248,0.9)
      );
    }

    input[type="range"]::-moz-range-thumb {
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #e5e7eb, #4f46e5);
      box-shadow:
        0 0 0 1px rgba(15,23,42,0.95),
        0 0 0 3px rgba(191,219,254,0.7),
        0 8px 20px rgba(30,64,175,0.9);
      border: none;
    }

    .slider-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 10px;
      color: var(--text-subtle);
    }

    .slider-value-badge {
      font-size: 10px;
      padding: 1px 6px;
      border-radius: 999px;
      background: rgba(15,23,42,0.96);
      border: 1px solid rgba(129,140,248,0.8);
      color: #e5e7eb;
      box-shadow: 0 0 0 1px rgba(15,23,42,0.9);
    }

    .slider-badge {
      font-size: 10px;
      padding: 1px 5px;
      border-radius: 999px;
      background: rgba(30,64,175,0.6);
      border: 1px solid rgba(96,165,250,0.85);
      color: #dbeafe;
    }

    .toggle-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      font-size: 11px;
      padding-top: 2px;
    }

    .toggle-main {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .toggle-label {
      display: flex;
      flex-direction: column;
      gap: 1px;
    }

    .toggle-label strong {
      font-weight: 500;
    }

    .toggle-desc {
      font-size: 10px;
      color: var(--text-subtle);
    }

    .toggle-switch {
      width: 36px;
      height: 20px;
      border-radius: 999px;
      background: linear-gradient(
        to right,
        rgba(55,65,81,0.95),
        rgba(31,41,55,0.98)
      );
      box-shadow:
        0 0 0 1px rgba(15,23,42,0.95),
        0 6px 16px rgba(15,23,42,0.9);
      padding: 2px;
      display: flex;
      align-items: center;
      cursor: pointer;
      position: relative;
      transition: background 0.15s ease;
    }

    .toggle-switch[data-on="true"] {
      background: linear-gradient(
        to right,
        rgba(34,197,94,0.95),
        rgba(22,163,74,0.98)
      );
    }

    .toggle-knob {
      width: 16px;
      height: 16px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #e5e7eb, #9ca3af);
      box-shadow:
        0 0 0 1px rgba(15,23,42,0.9),
        0 8px 18px rgba(15,23,42,0.9);
      transform: translateX(0);
      transition: transform 0.16s ease;
    }

    .toggle-switch[data-on="true"] .toggle-knob {
      transform: translateX(16px);
    }

    .toggle-mark {
      font-size: 9px;
      color: rgba(248,250,252,0.85);
    }

    .toggle-support {
      font-size: 10px;
      color: var(--text-subtle);
    }

    .toggle-support strong {
      color: #e5e7eb;
    }

    .buttons-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 2px;
    }

    .btn {
      border-radius: 999px;
      border: none;
      outline: none;
      cursor: pointer;
      font-size: 12px;
      font-weight: 500;
      padding: 6px 10px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: background 0.12s ease, transform 0.08s ease,
        box-shadow 0.12s ease, opacity 0.1s ease;
      white-space: nowrap;
    }

    .btn-primary {
      background: radial-gradient(
          circle at top left,
          rgba(96,165,250,0.9),
          transparent 60%
        ),
        linear-gradient(
          to right,
          rgba(79,70,229,0.98),
          rgba(129,140,248,0.95)
        );
      color: #e5e7eb;
      box-shadow:
        0 0 0 1px rgba(15,23,42,0.9),
        0 14px 30px rgba(30,64,175,0.95);
    }

    .btn-primary:hover:not(:disabled) {
      transform: translateY(-1px);
      box-shadow:
        0 0 0 1px rgba(15,23,42,0.9),
        0 18px 40px rgba(30,64,175,1);
      background: radial-gradient(
          circle at top left,
          rgba(129,140,248,0.9),
          transparent 60%
        ),
        linear-gradient(
          to right,
          rgba(67,56,202,1),
          rgba(129,140,248,1)
        );
    }

    .btn-ghost {
      background: radial-gradient(
          circle at top left,
          rgba(15,23,42,0.98),
          rgba(15,23,42,1)
        ),
        rgba(15,23,42,0.98);
      color: #e5e7eb;
      border: 1px solid rgba(148,163,184,0.55);
      box-shadow:
        0 0 0 1px rgba(15,23,42,0.9),
        0 10px 22px rgba(15,23,42,0.95);
    }

    .btn-ghost:hover:not(:disabled) {
      transform: translateY(-1px);
      border-color: rgba(209,213,219,0.9);
      box-shadow:
        0 0 0 1px rgba(15,23,42,1),
        0 14px 32px rgba(15,23,42,1);
      background: radial-gradient(
          circle at top left,
          rgba(17,24,39,1),
          rgba(15,23,42,1)
        ),
        rgba(17,24,39,1);
    }

    .btn-subtle {
      background: rgba(15,23,42,0.96);
      color: #e5e7eb;
      border: 1px solid rgba(75,85,99,0.85);
      box-shadow:
        0 0 0 1px rgba(15,23,42,0.9),
        0 10px 22px rgba(15,23,42,0.95);
    }

    .btn-subtle:hover:not(:disabled) {
      transform: translateY(-1px);
      border-color: rgba(148,163,184,0.9);
      background: rgba(17,24,39,0.98);
      box-shadow:
        0 0 0 1px rgba(15,23,42,1),
        0 14px 32px rgba(15,23,42,1);
    }

    .btn-small {
      font-size: 11px;
      padding: 4px 8px;
    }

    .btn:disabled {
      opacity: 0.55;
      cursor: not-allowed;
    }

    .btn-icon {
      width: 16px;
      height: 16px;
      border-radius: 999px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      background: rgba(15,23,42,0.9);
      box-shadow: 0 0 0 1px rgba(15,23,42,0.95);
    }

    .status {
      margin-top: 6px;
      padding: 6px 8px;
      border-radius: 10px;
      background: rgba(15,23,42,0.98);
      border: 1px solid rgba(55,65,81,0.9);
      font-size: 11px;
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .status-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
    }

    .status-main {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .status-dot {
      width: 9px;
      height: 9px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #fee2e2, #f97373);
      box-shadow:
        0 0 0 1px rgba(15,23,42,0.9),
        0 0 0 4px rgba(248,113,113,0.2);
    }

    .status-dot.ok {
      background: radial-gradient(circle at 30% 30%, #bbf7d0, #4ade80);
      box-shadow:
        0 0 0 1px rgba(15,23,42,0.9),
        0 0 0 4px rgba(74,222,128,0.25);
    }

    .status-text {
      color: #e5e7eb;
    }

    .status-sub {
      font-size: 10px;
      color: var(--text-subtle);
    }

    .status-tag {
      font-size: 10px;
      padding: 1px 5px;
      border-radius: 999px;
      background: rgba(15,23,42,0.96);
      border: 1px solid rgba(148,163,184,0.8);
      color: #e5e7eb;
    }

    .status-metric-row {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      font-size: 10px;
      color: var(--text-subtle);
    }

    .status-metric-pill {
      padding: 1px 5px;
      border-radius: 999px;
      background: rgba(15,23,42,0.96);
      border: 1px solid rgba(55,65,81,0.9);
    }

    .status-metric-pill strong {
      color: #e5e7eb;
    }

    .preview-grid {
      display: grid;
      grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
      gap: 10px;
    }

    @media (max-width: 720px) {
      .preview-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .preview-panel {
      border-radius: 14px;
      background: radial-gradient(
          circle at top left,
          rgba(15,23,42,0.98),
          rgba(15,23,42,1)
        ),
        rgba(15,23,42,0.98);
      border: 1px solid rgba(55,65,81,0.95);
      padding: 8px 8px 8px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      box-shadow:
        0 0 0 1px rgba(15,23,42,1),
        0 12px 28px rgba(15,23,42,0.98);
    }

    .preview-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 6px;
      font-size: 11px;
    }

    .preview-title {
      display: flex;
      align-items: center;
      gap: 6px;
      color: #e5e7eb;
    }

    .preview-title span {
      font-weight: 500;
    }

    .preview-chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      font-size: 10px;
      color: var(--text-subtle);
    }

    .preview-chip {
      padding: 1px 5px;
      border-radius: 999px;
      background: rgba(15,23,42,0.96);
      border: 1px solid rgba(55,65,81,0.9);
    }

    .preview-chip strong {
      color: #e5e7eb;
    }

    .canvas-shell {
      position: relative;
      border-radius: 10px;
      overflow: hidden;
      background: radial-gradient(circle at center, #020617, #020617);
      min-height: 180px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow:
        inset 0 0 0 1px rgba(15,23,42,1),
        0 10px 24px rgba(15,23,42,0.95);
    }

    canvas {
      max-width: 100%;
      height: auto;
      image-rendering: pixelated;
    }

    .canvas-placeholder {
      font-size: 11px;
      color: var(--text-subtle);
      text-align: center;
      padding: 16px 12px;
    }

    .canvas-placeholder strong {
      color: #e5e7eb;
    }

    .cipher-canvas-blur {
      filter: blur(3px);
      transition: filter 0.2s ease;
    }

    body[data-preview-sharp="true"] .cipher-canvas-blur {
      filter: none;
    }

    footer {
      max-width: 1200px;
      margin: 0 auto 10px;
      padding: 0 16px 6px;
      font-size: 11px;
      color: var(--text-subtle);
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      justify-content: space-between;
    }

    .foot-main {
      display: flex;
      align-items: center;
      gap: 6px;
      flex-wrap: wrap;
    }

    .foot-pill {
      padding: 1px 6px;
      border-radius: 999px;
      background: rgba(15,23,42,0.96);
      border: 1px solid rgba(75,85,99,0.9);
    }

    .foot-warning {
      color: #fee2e2;
    }

    .foot-warning strong {
      color: #fecaca;
    }

    .foot-secondary {
      font-size: 10px;
      color: rgba(156,163,175,0.9);
    }

    .foot-secondary strong {
      color: #e5e7eb;
    }

    .foot-links {
      font-size: 10px;
      color: rgba(156,163,175,0.9);
      display: flex;
      gap: 8px;
    }

    .foot-links a {
      color: inherit;
      text-decoration: none;
      border-bottom: 1px dotted rgba(148,163,184,0.7);
      padding-bottom: 1px;
    }

    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }
  </style>
</head>
<body data-preview-sharp="false">
  <div class="page">
    <header>
      <div class="title-row">
        <div class="title-main">
          <div class="logo" aria-hidden="true"></div>
          <h1>Lightweight Image Cipher Â· è½»é‡å›¾åƒåŠ å¯†</h1>
          <span class="badge">Demo Â· æ•™å­¦å‘ Â· å¯é€†åƒç´ ç½®æ¢</span>
        </div>
      </div>
      <p class="subtitle">
        å¯¼å…¥å›¾ç‰‡åï¼Œé€šè¿‡å¯†é’¥ã€åƒç´ å—å¤§å°å’Œæ‰“ä¹±å¼ºåº¦ï¼Œå¯¹å›¾åƒè¿›è¡Œè½»é‡çš„å±€éƒ¨æ‰“ä¹±åŠ å¯†ï¼ŒåŒä¸€å‚æ•°å†æ¬¡åº”ç”¨å³å¯å°è¯•è§£å¯†è¿˜åŸã€‚é€‚åˆä½œä¸ºå‰ç«¯ Demo æˆ–ç®€å•éšè—ï¼Œä¸é€‚åˆé«˜å®‰å…¨åœºæ™¯ã€‚
      </p>
    </header>

    <main>
      <section class="panel" aria-label="æ§åˆ¶å°">
        <div class="panel-header">
          <div class="panel-title">
            <div class="panel-title-dot"></div>
            <span>Control Â· æ§åˆ¶å°</span>
          </div>
          <div class="panel-tagline">å¯¼å…¥å›¾ç‰‡ã€è®¾ç½®å¯†é’¥å’Œå¼ºåº¦ï¼Œç„¶åä¸€é”®åŠ å¯† / è§£å¯†ã€‚</div>
        </div>
        <div class="panel-body">
          <div class="section-label">Image Source Â· å›¾ç‰‡æº</div>
          <div class="section">
            <div class="section-header">
              <div class="section-title">
                <span>é€‰æ‹©å›¾ç‰‡</span>
                <span class="section-pill">æœ¬åœ°å¤„ç† Â· ä¸ä¸Šä¼ </span>
              </div>
              <div class="section-desc">æ”¯æŒ JPG / PNG / WebPï¼Œå»ºè®®ä¸è¶…è¿‡ 8MBã€‚</div>
            </div>

            <div
              class="dropzone"
              id="dropzone"
              tabindex="0"
              role="button"
              aria-label="æ‹–æ‹½å›¾ç‰‡åˆ°è¿™é‡Œï¼Œæˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶"
            >
              <div class="dropzone-title">
                æ‹–æ‹½å›¾ç‰‡åˆ°è¿™é‡Œï¼Œæˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶
              </div>
              <div class="pill-row">
                <span class="pill">JPG / JPEG</span>
                <span class="pill">PNG</span>
                <span class="pill">WebP</span>
                <span class="pill">â‰¤ 8 MB</span>
              </div>
              <div class="hint-row">
                <span class="hint-icon">â—</span>
                <span class="dropzone-hint">
                  æœ¬å·¥å…·ä¸ä¼šä¸Šä¼ å›¾ç‰‡åˆ°æœåŠ¡å™¨ï¼Œæ‰€æœ‰å¤„ç†éƒ½åœ¨ä½ çš„æµè§ˆå™¨å†…å­˜ä¸­å®Œæˆã€‚
                </span>
              </div>
            </div>

            <input
              type="file"
              id="fileInput"
              class="sr-only"
              accept="image/png,image/jpeg,image/webp"
            />

            <div class="fields">
              <div class="field-group">
                <div class="field-label-row">
                  <div class="field-label-main">
                    <span>åŠ å¯†å¯†é’¥</span>
                    <span class="label-tag">åŒä¸€å¯†é’¥æ‰èƒ½æ­£ç¡®è§£å¯†</span>
                  </div>
                  <div class="field-label-secondary">
                    æ”¯æŒä»»æ„å­—ç¬¦ä¸²ï¼Œå»ºè®® 6 ä½ä»¥ä¸Šã€‚
                  </div>
                </div>
                <div class="input-shell">
                  <div class="input-inner">
                    <span class="input-icon">ğŸ”‘</span>
                    <input
                      type="text"
                      id="keyInput"
                      placeholder="ä¾‹å¦‚ï¼šmy-secret-key-2024"
                      autocomplete="off"
                    />
                    <span class="input-meta">ä»…ç”¨äºæœ¬åœ°ä¼ªéšæœºç½®æ¢ï¼Œä¸ä¸Šä¼ ã€‚</span>
                  </div>
                </div>
              </div>

              <div class="field-group">
                <div class="field-label-row">
                  <div class="field-label-main">
                    <span>åƒç´ å—å¤§å°</span>
                    <span class="label-tag">å—è¶Šå¤§è¶Šçœ‹ä¸æ¸…</span>
                  </div>
                  <div class="field-label-secondary">
                    æ§åˆ¶æ¯æ¬¡æ‰“ä¹±çš„æœ€å°å•å…ƒï¼Œè¿‡å¤§ä¼šå½±å“è§£å¯†ç»†èŠ‚æ„ŸçŸ¥ã€‚
                  </div>
                </div>
                <div class="slider-row">
                  <div class="slider-shell">
                    <div class="slider-inner">
                      <input
                        type="range"
                        id="blockSizeInput"
                        min="4"
                        max="64"
                        step="2"
                        value="16"
                      />
                      <div class="slider-meta">
                        <span>4 pxï¼ˆç»†ï¼‰ â†’ 64 pxï¼ˆç²—ï¼‰</span>
                        <span
                          class="slider-value-badge"
                          id="blockSizeLabel"
                        >16 px</span>
                      </div>
                    </div>
                  </div>
                  <span class="slider-badge">åƒç´ å—</span>
                </div>
              </div>

              <div class="field-group">
                <div class="field-label-row">
                  <div class="field-label-main">
                    <span>æ‰“ä¹±å¼ºåº¦</span>
                    <span class="label-tag">å½±å“æ‰“ä¹±åƒç´ å—çš„æ¯”ä¾‹</span>
                  </div>
                  <div class="field-label-secondary">
                    0% å®Œå…¨ä¸åŠ¨ï¼Œ100% å°½é‡æ‰“ä¹±æ‰€æœ‰å—ã€‚
                  </div>
                </div>
                <div class="slider-row">
                  <div class="slider-shell">
                    <div class="slider-inner">
                      <input
                        type="range"
                        id="shuffleStrengthInput"
                        min="0"
                        max="100"
                        step="1"
                        value="70"
                      />
                      <div class="slider-meta">
                        <span>é¢„è§ˆå¼ºåº¦ï¼šä½ â†’ é«˜</span>
                        <span
                          class="slider-value-badge"
                          id="shuffleStrengthLabel"
                        >70%</span>
                      </div>
                    </div>
                  </div>
                  <span class="slider-badge">æ‰“ä¹±å¼ºåº¦</span>
                </div>
              </div>

              <div class="field-group">
                <div class="toggle-row">
                  <div class="toggle-main">
                    <div
                      class="toggle-switch"
                      id="previewSharpToggle"
                      data-on="false"
                    >
                      <div class="toggle-knob"></div>
                    </div>
                    <div class="toggle-label">
                      <strong>é¢„è§ˆæ—¶å¯¹åŠ å¯†å›¾é¢å¤–åŠ ä¸€ç‚¹æ¨¡ç³Šï¼ˆCSSï¼Œä»…è§†è§‰æ•ˆæœï¼‰</strong>
                      <span class="toggle-desc">
                        åˆ‡æ¢ååªæ”¹å˜å³ä¾§é¢„è§ˆè§†è§‰æ•ˆæœï¼Œä¸å½±å“çœŸå®åƒç´ æ•°æ®ã€‚
                      </span>
                    </div>
                  </div>
                </div>
              </div>

              <div class="field-group">
                <div class="toggle-row">
                  <div class="toggle-main">
                    <div
                      class="toggle-switch"
                      id="rememberToggle"
                      data-on="true"
                    >
                      <div class="toggle-knob"></div>
                    </div>
                    <div class="toggle-label">
                      <strong>è®°ä½å½“å‰è®¾ç½®å’Œæœ€åä¸€å¼ å›¾ç‰‡</strong>
                      <span class="toggle-desc">
                        å‚æ•°å’Œæœ€è¿‘ä¸€æ¬¡çš„å›¾ç‰‡ä¼šä¿å­˜åˆ°æµè§ˆå™¨æœ¬åœ°å­˜å‚¨ï¼ˆä¸ä¼šä¸Šä¼ ï¼‰ã€‚
                      </span>
                    </div>
                  </div>
                  <div class="toggle-support">
                    <span>æœ¬åœ°å­˜å‚¨ Â· <strong>å¯æ¸…ç©º</strong></span>
                  </div>
                </div>
              </div>
            </div>

            <div class="buttons-row">
              <button class="btn btn-primary" id="encryptBtn">
                <span class="btn-icon">âŸ²</span>
                <span>åŠ å¯† / æ‰“ä¹±</span>
              </button>
              <button class="btn btn-ghost" id="decryptBtn">
                <span class="btn-icon">âŸ²</span>
                <span>å°è¯•è§£å¯†è¿˜åŸ</span>
              </button>
              <button class="btn btn-subtle btn-small" id="downloadBtn">
                <span class="btn-icon">â¬‡</span>
                <span>ä¸‹è½½å½“å‰åŠ å¯†å›¾</span>
              </button>
              <button class="btn btn-subtle btn-small" id="resetBtn">
                <span class="btn-icon">âœ•</span>
                <span>æ¸…ç©º & é‡ç½®</span>
              </button>
            </div>

            <div class="status" aria-live="polite">
              <div class="status-row">
                <div class="status-main">
                  <div class="status-dot" id="statusDot"></div>
                  <span class="status-text" id="statusText">ç­‰å¾…åŠ è½½å›¾ç‰‡</span>
                </div>
                <span class="status-tag" id="statusTag">æœªåŠ è½½å›¾ç‰‡</span>
              </div>
              <div class="status-sub">
                è½»é‡åƒç´ ç½®æ¢ï¼Œå¯é€†ã€‚è¾“å‡ºå‹ç¼© JPEGï¼Œä½“ç§¯æ§åˆ¶è¾ƒå¥½ã€‚æœ¬åœ°è¿è¡Œï¼Œé€‚åˆ Demo / æ•™å­¦ / ç®€å•éšè—ã€‚
              </div>
              <div class="status-metric-row" id="statusMetrics">
                <span class="status-metric-pill">
                  å›¾åƒå°ºå¯¸ï¼š<strong>â€“</strong>
                </span>
                <span class="status-metric-pill">
                  ä¼°è®¡ä½“ç§¯ï¼š<strong>â€“</strong>
                </span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="panel" aria-label="é¢„è§ˆ">
        <div class="panel-header">
          <div class="panel-title">
            <div class="panel-title-dot"></div>
            <span>Preview Â· é¢„è§ˆ</span>
          </div>
          <div class="panel-tagline">
            å·¦ä¾§åŸå›¾ï¼Œå³ä¾§ä¸ºåŠ å¯† / è§£å¯†åå›¾åƒã€‚ä½ å¯ä»¥è°ƒæ•´å‚æ•°åé‡æ–°åŠ å¯†è¿›è¡Œå¯¹æ¯”ã€‚
          </div>
        </div>
        <div class="panel-body">
          <div class="preview-grid">
            <div class="preview-panel">
              <div class="preview-header">
                <div class="preview-title">
                  <span>åŸå§‹å›¾åƒ</span>
                </div>
                <div class="preview-chip-row">
                  <span class="preview-chip" id="sourceSize">å°ºå¯¸ï¼šâ€“</span>
                  <span class="preview-chip" id="sourceBytes">ä¼°è®¡ä½“ç§¯ï¼šâ€“</span>
                </div>
              </div>
              <div class="canvas-shell">
                <canvas id="sourceCanvas"></canvas>
                <div class="canvas-placeholder" id="sourcePlaceholder">
                  <strong>å°šæœªåŠ è½½</strong><br />
                  è¯·é€‰æ‹©å›¾ç‰‡åï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºåŸå›¾é¢„è§ˆã€‚
                </div>
              </div>
            </div>

            <div class="preview-panel">
              <div class="preview-header">
                <div class="preview-title">
                  <span>åŠ å¯† / æ‰“ä¹±å›¾åƒ</span>
                </div>
                <div class="preview-chip-row">
                  <span class="preview-chip" id="cipherSize">å°ºå¯¸ï¼šâ€“</span>
                  <span class="preview-chip" id="cipherBytes">ä¼°è®¡ä½“ç§¯ï¼šâ€“</span>
                </div>
              </div>
              <div class="canvas-shell">
                <canvas id="cipherCanvas" class="cipher-canvas-blur"></canvas>
                <div class="canvas-placeholder" id="cipherPlaceholder">
                  <strong>å°šæœªç”Ÿæˆ</strong><br />
                  ç‚¹å‡»ã€ŒåŠ å¯† / æ‰“ä¹±ã€åï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºç»“æœé¢„è§ˆã€‚
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <div class="foot-main">
        <span class="foot-pill">æç¤ºï¼šè¿™æ˜¯ç®€æ˜“æ¼”ç¤ºçº§åŠ å¯†ï¼Œ<span class="foot-warning"><strong>ä¸é€‚åˆçœŸæ­£é«˜å®‰å…¨åœºæ™¯</strong></span></span>
      </div>
      <div class="foot-secondary">
        çœŸæ­£å®‰å…¨éœ€æ±‚è¯·è€ƒè™‘æœåŠ¡ç«¯ AES ç­‰ä¸“ä¸šæ–¹æ¡ˆï¼Œæˆ–æˆç†Ÿå¯†ç å­¦åº“ï¼ˆå¦‚ WebCryptoï¼‰ã€‚
      </div>
    </footer>
  </div>

  <script>
    // å·¥å…·ï¼šå­—ç¬¦ä¸²å“ˆå¸Œï¼ˆç”Ÿæˆç¨³å®šæ•´æ•°ï¼Œé¿å…ä½¿ç”¨ Math.randomï¼‰
    function murmurhash2_32_gc(str, seed) {
      let l = str.length;
      let h = seed ^ l;
      let i = 0;
      while (l >= 4) {
        let k =
          (str.charCodeAt(i) & 0xff) |
          ((str.charCodeAt(i + 1) & 0xff) << 8) |
          ((str.charCodeAt(i + 2) & 0xff) << 16) |
          ((str.charCodeAt(i + 3) & 0xff) << 24);
        k = (k & 0xffff) * 0x5bd1e995 + (((k >>> 16) * 0x5bd1e995) << 16);
        k ^= k >>> 24;
        k = (k & 0xffff) * 0x5bd1e995 + (((k >>> 16) * 0x5bd1e995) << 16);

        h = ((h & 0xffff) * 0x5bd1e995 + (((h >>> 16) * 0x5bd1e995) << 16)) ^ k;
        i += 4;
        l -= 4;
      }
      switch (l) {
        case 3:
          h ^= (str.charCodeAt(i + 2) & 0xff) << 16;
        case 2:
          h ^= (str.charCodeAt(i + 1) & 0xff) << 8;
        case 1:
          h ^= str.charCodeAt(i) & 0xff;
          h =
            (h & 0xffff) * 0x5bd1e995 +
            (((h >>> 16) * 0x5bd1e995) << 16);
      }
      h ^= h >>> 13;
      h =
        (h & 0xffff) * 0x5bd1e995 +
        (((h >>> 16) * 0x5bd1e995) << 16);
      h ^= h >>> 15;
      return h >>> 0;
    }

    // åŸºäºå¯†é’¥ + åæ ‡ + å‚æ•°çš„å¯å¤ç°ä¼ªéšæœºæ•°
    function pseudoRandom(key, x, y, blockSize, strength, extra) {
      const base = key + "|" + x + "|" + y + "|" + blockSize + "|" + strength + "|" + (extra || 0);
      const h = murmurhash2_32_gc(base, 0x9747b28c);
      // æ˜ å°„åˆ° (0,1)
      return (h % 1000000) / 1000000;
    }

    // ä» 0..(n-1) ä¸­ç”Ÿæˆå¯å¤ç°çš„ä¼ªéšæœºæ‰“ä¹±ç´¢å¼•
    function getDeterministicPermutation(key, n, x, y, blockSize, strength) {
      // ä½¿ç”¨ç®€åŒ–çš„ Fisherâ€“Yatesï¼šä½†éšæœºæºæ›¿æ¢ä¸º pseudoRandom
      const arr = new Array(n);
      for (let i = 0; i < n; i++) arr[i] = i;
      for (let i = n - 1; i > 0; i--) {
        const r = pseudoRandom(key, x, y, blockSize, strength, i);
        const j = Math.floor(r * (i + 1));
        const tmp = arr[i];
        arr[i] = arr[j];
        arr[j] = tmp;
      }
      return arr;
    }

    // DOM å…ƒç´ å¼•ç”¨
    const fileInput = document.getElementById("fileInput");
    const dropzone = document.getElementById("dropzone");
    const keyInput = document.getElementById("keyInput");
    const blockSizeInput = document.getElementById("blockSizeInput");
    const shuffleStrengthInput = document.getElementById(
      "shuffleStrengthInput"
    );
    const blockSizeLabel = document.getElementById("blockSizeLabel");
    const shuffleStrengthLabel = document.getElementById(
      "shuffleStrengthLabel"
    );

    const previewSharpToggle = document.getElementById("previewSharpToggle");
    const rememberToggle = document.getElementById("rememberToggle");

    const encryptBtn = document.getElementById("encryptBtn");
    const decryptBtn = document.getElementById("decryptBtn");
    const downloadBtn = document.getElementById("downloadBtn");
    const resetBtn = document.getElementById("resetBtn");

    const statusDot = document.getElementById("statusDot");
    const statusText = document.getElementById("statusText");
    const statusTag = document.getElementById("statusTag");
    const statusMetrics = document.getElementById("statusMetrics");

    const sourceCanvas = document.getElementById("sourceCanvas");
    const cipherCanvas = document.getElementById("cipherCanvas");
    const sourcePlaceholder = document.getElementById("sourcePlaceholder");
    const cipherPlaceholder = document.getElementById("cipherPlaceholder");
    const sourceSize = document.getElementById("sourceSize");
    const sourceBytes = document.getElementById("sourceBytes");
    const cipherSize = document.getElementById("cipherSize");
    const cipherBytes = document.getElementById("cipherBytes");

    const sourceCtx = sourceCanvas.getContext("2d");
    const cipherCtx = cipherCanvas.getContext("2d");

    // å…¨å±€çŠ¶æ€
    let originalImage = null;
    let currentCipherImageData = null;
    let currentIsEncrypted = false;
    let lastParams = null; // { key, blockSize, strength }

    // æœ¬åœ°å­˜å‚¨é”®
    const STORAGE_KEY = "lightweight-image-cipher-demo-v1";

    function formatBytes(size) {
      if (!size || !Number.isFinite(size)) return "â€“";
      if (size < 1024) return size.toFixed(0) + " B";
      if (size < 1024 * 1024) return (size / 1024).toFixed(1) + " KB";
      return (size / (1024 * 1024)).toFixed(2) + " MB";
    }

    function updateStatus(text, tag, ok = false) {
      statusText.textContent = text;
      statusTag.textContent = tag;
      statusDot.classList.toggle("ok", ok);
    }

    function updateMetricsFromCanvas() {
      if (!originalImage) {
        sourceSize.textContent = "å°ºå¯¸ï¼šâ€“";
        sourceBytes.textContent = "ä¼°è®¡ä½“ç§¯ï¼šâ€“";
        cipherSize.textContent = "å°ºå¯¸ï¼šâ€“";
        cipherBytes.textContent = "ä¼°è®¡ä½“ç§¯ï¼šâ€“";
        statusMetrics.innerHTML = `
          <span class="status-metric-pill">å›¾åƒå°ºå¯¸ï¼š<strong>â€“</strong></span>
          <span class="status-metric-pill">ä¼°è®¡ä½“ç§¯ï¼š<strong>â€“</strong></span>
        `;
        return;
      }
      const w = sourceCanvas.width;
      const h = sourceCanvas.height;
      const pixels = w * h;
      const approxSize = pixels * 4; // RGBA å­—èŠ‚
      sourceSize.textContent = `å°ºå¯¸ï¼š${w} Ã— ${h}`;
      sourceBytes.textContent = `ä¼°è®¡ä½“ç§¯ï¼š${formatBytes(approxSize)}`;

      if (cipherCanvas.width > 0 && cipherCanvas.height > 0) {
        const cW = cipherCanvas.width;
        const cH = cipherCanvas.height;
        const cPixels = cW * cH;
        const cApprox = cPixels * 4;
        cipherSize.textContent = `å°ºå¯¸ï¼š${cW} Ã— ${cH}`;
        cipherBytes.textContent = `ä¼°è®¡ä½“ç§¯ï¼š${formatBytes(cApprox)}`;
      } else {
        cipherSize.textContent = "å°ºå¯¸ï¼šâ€“";
        cipherBytes.textContent = "ä¼°è®¡ä½“ç§¯ï¼šâ€“";
      }

      statusMetrics.innerHTML = `
        <span class="status-metric-pill">å›¾åƒå°ºå¯¸ï¼š<strong>${w} Ã— ${h}</strong></span>
        <span class="status-metric-pill">ä¼°è®¡ä½“ç§¯ï¼š<strong>${formatBytes(approxSize)}</strong></span>
      `;
    }

    function saveState() {
      try {
        if (rememberToggle.dataset.on !== "true") {
          localStorage.removeItem(STORAGE_KEY);
          return;
        }
        const data = {
          key: keyInput.value || "",
          blockSize: Number(blockSizeInput.value),
          strength: Number(shuffleStrengthInput.value),
          previewSharp: document.body.dataset.previewSharp === "true",
        };
        if (originalImage && typeof originalImage.src === "string") {
          data.lastImageDataUrl = sourceCanvas.toDataURL("image/jpeg", 0.
